title: Azure DevOps - 初探 Azure Pipeline
authors: MingLun Allen Wu
date: 2022-01-13 12:00:00
tags: DevOps, Azure DevOps
category: Framework
summary: 待補
slug: azure_pipeline
top_image: https://images.unsplash.com/photo-1581472723648-909f4851d4ae?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80
status: draft

---
## TL;DR

## 何謂 Azure Pipelines ?

`Azure Pipeline` 是 `Azure DevOps` 這個程式碼版控平台的功能，可以根據團隊成員的需求，**自動測試、部署開發成果**。

這裡提到的自動測試、自動部署，並不是開發完成後，將程式碼丟給 `Azure Pipeline`，它就會自動幫你檢查程式、或是幫你安裝在你想要的機器上。 而是**提供一個介面，讓使用者可按照需求，建立一套「自動流程」**。

這套流程通常會結合 **「持續整合」(CI)** 和 **「持續部署」(CD)** 的概念，最終目的是希望讓開發者專注在程式碼的開發，遞交成果後，由版控平台進行自動化的檢查及部署。

這些自動化流程的最終目的： 

> 確保使用者(開發者)建立具有一致品質的程式碼

開發者間能透過撰寫 Test Case ，建立團隊的共識-「程式碼的標準為何」。接著在開發過程中，透過 `Azure Pipeline` 來自動檢查，當檢查通過，則將此次開發的新項目整併回產品中。

常見的版本控制平台都有類似的自動化功能:

+ **Azure DevOps**: `Azure Pipeline`
+ **Github**: `Github Action`
+ **Gitlab**: `Gitlab CI/CD`

---

## 開始使用 Azure Pipelines

在專案的儲存庫中，建立一個 `azure-pipelines.yml`:

```yaml
trigger:
  - main

steps:
- script: |
    echo "my first pipeline"
```

當你在專案根目錄中放置 `azure-pipelines.yml` 後，就可以在專案的 **Build** 選單中看到此 Pipeline。

以下先開始說明 Pipeline 架構：

### 觸發時機

在 pipeline 的開頭，通常會定義此 pipeline 的觸發時間點，常見的觸發時間點有幾項: 

+ 當「特定的Branch被更新」時(使用 **trigger** 關鍵字)
+ 當「PR要被Merege回特定Branch」時 (使用 **pr**關鍵字)

確定使用 **triiger** 或 **pr** 後，接下來就是決定觸發的分支為何