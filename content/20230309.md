title: Pytest 102 - 給 Python 開發者的測試入門(2) - mock
authors: MingLun Allen Wu
date: 2023-03-09 12:00:00
tags: Python, Test
category: Tool
summary: 待補
slug: pytest_102
top_image: https://images.unsplash.com/photo-1581472723648-909f4851d4ae?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80
status: draft

## 前情提要

[Pytest 101 - 給 Python 開發者的測試入門](https://www.minglunwu.com/notes/2022/pytest_101.html)

## TL;DR

## 什麼是 Mock? 為什麼需要它？

在前一篇文章 : [Pytest 101 - 給 Python 開發者的測試入門](https://www.minglunwu.com/notes/2022/pytest_101.html) 中，我們了解到要寫出高品質的程式碼，測試案例是不可或缺的。

但是在開發時，很容易遇到一些「不可預料」的情況，讓整個測試案例變得不受控。

讓我們舉幾個例子：

## 案例 1 - 程式碼中有耗時很久的程式碼

我們試著建立一個檔案 : `src/module_mock.py`:

```python
# src/module_mock.py
import time

def sleep_for_a_while(seconds: int) -> int:
    """模擬一個需要執行有點久的函數

    Args:
        seconds (int): Pending 時間


    Returns:
        int: 回傳 Pending 秒數
    """
    print("Ready for sleeping!")
    time.sleep(seconds)
    return seconds
```

我們建立了一個函式 `sleep_for_a_while`，在這個函式中會使用 `time.sleep()` 暫停幾秒，然後回傳參數。

假設我們在