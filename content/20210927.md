title: Ansible 入門筆記
authors: MingLun Allen Wu
date: 2021-08-27 12:00:00
tags: Python, Ansible
category: Tool
summary: 待補
slug: ansible_note
top_image: https://images.unsplash.com/photo-1478502161016-a691575b097b?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=2070&q=80
status: draft

# TL;DR
`Ansible`是適用於Python環境的自動化組態管理工具，組態(Configuration Management)意味著環境的設定及部署。 使用 `Ansible` 可以將「制式化的系統操作」自動化，讓開發者將注意力投注在值得關注的事物上。

撰寫好「部署的流程」(例如安裝套件、複製檔案...)及「遠端主機的連線資訊」後，即可在數台遠端主機上自動部署，提高部署的效率、降低安裝過程中人為失誤的機率。

# Why Ansible ?

`Ansible`的優勢在於: 

1. 使用Python生態系： 

    近期許多機器學習框架皆是建構於Python生態系

2. 使用SSH連線，不需額外安裝工具:
   
   使用 `Ansible` 對遠端主機進行操作時，是透過 `SSH` 進行遠端操作，意味著不需要在遠端主機額外安裝套件，僅需開啟SSH連接阜即可。 在某些難以安裝套件的環境(例如醫院、銀行)相當方便。

# 使用 Ansible 的目的

1. 提升 Production 環境的穩定性及可靠性
   使用檔案管理「部署內容」，達到 [*Infrastructure as Code*](https://www.trendmicro.com/zh_hk/what-is/cloud-security/infrastructure-as-code.html)，管理上也相對單純，可以使用版本控制進行進退版操作。

2. 減少服務中斷時間
    若發生服務中斷，需要將節點下線重新部署，使用`Ansible`進行部署能夠按照「預先設計好的流程」重新部署，不會受限於人員的精神狀況及操作穩定度。

3. 確保環境間(開發、測試、正式)設定對齊
    如果同時有多台機器，使用 Ansible 統一部署，可確保在部署過程中統一參考組態檔案，不會發生人為失誤(例如手誤輸入錯誤的資訊)，或是不同部署人員部署順序不一致。

---
# 檔案結構

在學習一個工具時，我習慣先確認「專案的結構該長怎麼樣」，以下是一個 `Ansible` 專案的大致樣貌: 

```
ansible_project
| - README.md
| - INVENTORY_FILE_1
| - INVENTORY_FILE_2
|
| - group_vars/
    | - GROUP1.yml
    | - GROUP2.yml
```