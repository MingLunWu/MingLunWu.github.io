<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:site_name" content="Byte and Ink"><meta property="og:type" content="article"><meta property="og:image" content="https://images.unsplash.com/photo-1606159068539-43f36b99d1b2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8ZGVidWd8ZW58MHwwfDB8fHww&auto=format&fit=crop&w=900&q=60"><meta property="twitter:image" content="https://images.unsplash.com/photo-1606159068539-43f36b99d1b2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8ZGVidWd8ZW58MHwwfDB8fHww&auto=format&fit=crop&w=900&q=60"><meta name=title content="如何透過 VSCode 的 Python Extension 進行 Debug ?"><meta property="og:title" content="如何透過 VSCode 的 Python Extension 進行 Debug ?"><meta property="twitter:title" content="如何透過 VSCode 的 Python Extension 進行 Debug ?"><meta name=description content><meta property="og:description" content><meta property="twitter:description" content><meta property="twitter:card" content="VSCode 中的 Python Extension 除了 Syntax Highlight 外，其實還有很棒的 Debug 功能。"><meta name=keyword content="吳明倫, MingLun, minglunwu"><link rel="shortcut icon" href=/img/favicon.ico><title>如何透過 VSCode 的 Python Extension 進行 Debug ? | Byte and Ink</title><link rel=canonical href=/notes/2023/vscode_python_extension.html/><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/hugo-theme-cleanwhite.min.css><link rel=stylesheet href=/css/zanshang.css><link rel=stylesheet href=/css/font-awesome.all.min.css><script src=/js/jquery.min.js></script>
<script src=/js/bootstrap.min.js></script>
<script src=/js/hux-blog.min.js></script>
<script src=/js/lazysizes.min.js></script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-NC508K3RBY"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-NC508K3RBY",{anonymize_ip:!1})}</script><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class=container-fluid><div class="navbar-header page-scroll"><button type=button class=navbar-toggle>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class=navbar-brand href=/>Byte and Ink</a></div><div id=huxblog_navbar><div class=navbar-collapse><ul class="nav navbar-nav navbar-right"><li><a href=/>All Posts</a></li><li><a href=/categories/reading-with-ml/>reading-with-ml</a></li><li><a href=/categories/weekly-reflection/>weekly-reflection</a></li><li><a href=/archive/>ARCHIVE</a></li><li><a href=/about/>ABOUT</a></li><li><a href=/search><i class="fa fa-search"></i></a></li></ul></div></div></div></nav><script>var $body=document.body,$toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse");$toggle.addEventListener("click",handleMagic);function handleMagic(){$navbar.className.indexOf("in")>0?($navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)):($collapse.style.height="auto",$navbar.className+=" in")}</script><style type=text/css>header.intro-header{background-image:url(https://images.unsplash.com/photo-1606159068539-43f36b99d1b2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8ZGVidWd8ZW58MHwwfDB8fHww&auto=format&fit=crop&w=900&q=60)}.utterances{max-width:100%}</style><header class=intro-header><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><div class=tags><a class=tag href=/tags/python title=Python>Python</a></div><h1>如何透過 VSCode 的 Python Extension 進行 Debug ?</h1><h2 class=subheading></h2><span class=meta>Posted by
MingLun Allen Wu
on
Saturday, July 29, 2023</span></div></div></div></div></header><article><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
post-container"><h1 id=tldr>TL;DR</h1><p><code>VSCode</code> 的 Python Extension 除了 Syntax Highlight 外，其實還提供了相當好用的 Debug 功能。</p><p>本篇筆記分享 Debugger 工具的使用方式、操作介面以及如何將其整合至開發流程中。</p><h1 id=vscode---python-extension>VSCode - Python Extension</h1><p>近年來 Python 一直最熱門的幾種程式語言之一，如果你是使用 <code>VSCode</code> 作為開發的 IDE，那麼一定對於 <code>VSCode</code> 的 Python Extension 不陌生。</p><p>安裝 Python Extension 後，當開啟 Python Script 時，會在指定的環境中，讀取相關的 Python Module，並且提供適當的 Syntax Highlight。</p><p>但是其實 <code>VSCode</code> 的 Python Extension 真正好用的功能可不只這樣，它其實還提供了很完整的 <strong>Debug</strong> 功能。</p><p>從研究所時期，不論是 Machine Learning 的建模，或是近期在開發 Python 的 SDK，這個 <strong>Debug</strong> 功能對我的開發效率有極大的提升。</p><p>今天想要用這篇短短的筆記，來細細分享這個功能。</p><h1 id=使用流程圖>使用流程圖</h1><p>我想用下面這張圖片來說明 Debug 的流程 :</p><p><img src=https://minglunwu.github.io/images/20230729/flow.png alt></p><h2 id=1-開發程式>1. 開發程式</h2><p>使用 <code>VSCode</code> 搭配 Python Extension 進行開發 :</p><p><img src=https://minglunwu.github.io/images/20230729/syntax_highlight.png alt></p><h2 id=2-設定暫停點>2. 設定暫停點</h2><p>在開發過程中，難免會有一些「抽象時刻」:</p><blockquote><p>我不確定這個變數，在程式執行的時間點，到底長什麼樣子？</p></blockquote><p>我們稍微舉個實際的例子 :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff79c6>from</span> typing <span style=color:#ff79c6>import</span> Dict
</span></span><span style=display:flex><span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>confused_func</span>(product_info: Dict) <span style=color:#ff79c6>-&gt;</span> <span style=color:#8be9fd;font-style:italic>int</span>:
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>    示範用，假設你需要在這個函式中處理 product_info
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>...</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>if</span> <span style=color:#f1fa8c>&#34;pID&#34;</span> <span style=color:#ff79c6>in</span> product_info: <span style=color:#6272a4># 開發到此處時，你突然不確定 product_info 的內容。</span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>if</span> __name__ <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span>    product_info <span style=color:#ff79c6>=</span> read_product_info() <span style=color:#6272a4># 假設 product_info 是從其他地方來的物件</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    confused_func(product_info)
</span></span></code></pre></div><p>當你在開發 <code>confused_func()</code> 時，你不確定 <code>"pID"</code> 這個屬性到底有沒有存在於 <code>product_info</code> 中。</p><p>這時候，最直覺的作法可能是 : 直接執行這個 Python Script，反正錯了再改就好～</p><p>但其實你還有另外一種做法，在你想確認的地方<strong>設定 Break Point</strong> !</p><p>方法很簡單： 只需要在「覺得疑惑的程式碼」旁，點選行數旁的空白，就會出現一個紅點，這代表你在此處設定了一個 <code>Breakpoint</code> ! :</p><p><img src=https://minglunwu.github.io/images/20230729/set_breakpoint.png alt></p><h2 id=3-透過-debugger-執行腳本>3. 透過 Debugger 執行腳本</h2><p>接下來，我們準備啟動 Debugger 工具 : 點擊右上方紅圈處，選擇 <code>"Debug Python File"</code> 選項。如果有多個 Python 環境的使用者，此時會要求你選擇一個特定的 Python 環境：</p><p><img src=https://minglunwu.github.io/images/20230729/debug_2.png alt></p><h2 id=4-程式暫停>4. 程式暫停</h2><p>透過 Debugger 執行程式時， Debugger 會在特定的時間點「<strong>暫停</strong>」：這時候，你會發現剛剛設定 <code>Breakpoint</code> 的那一行變成「黃底」:</p><p><img src=https://minglunwu.github.io/images/20230729/debug_2.png alt></p><p>這時候我們就可以開始透過 Debug 工具進行互動了！</p><h2 id=5-透過-debugger-進行互動>5. 透過 Debugger 進行互動</h2><p>接下來，我們來介紹使用 Debug 工具時，幾個好用的 Panel !</p><h3 id=1---variables>1 - VARIABLES</h3><p>首先是 <code>VARIABLES</code> 區塊 :</p><p><img src=https://minglunwu.github.io/images/20230729/debug_3.png alt></p><p>你可以在此掌握所有物件的狀態，也可以依據需求向下展開，呈現當前的屬性值是多少。</p><h3 id=2---watch>2 - WATCH</h3><p>接著是 <code>WATCH</code> 區塊 :</p><p><img src=https://minglunwu.github.io/images/20230729/debug_4.png alt></p><p>在此區塊中，你可以「<strong>設定客製化的條件</strong>」來查看變數。</p><p>以範例程式碼來說，我們希望能夠掌握 <code>product_info</code> 這個物件的 key 是什麼，因此我們可以在 <code>WATCH</code> 區塊設定兩個條件 :</p><ul><li><code>product_info["pid"]</code></li><li><code>product_info.keys()</code></li></ul><p>如此一來，我們不再需要手動展開 <code>VARIABLES</code> 區塊的變數，可以直接設定我們真正關心的值。</p><p>當執行當下包含許多複雜的物件時，直接在 <code>WATCH</code> 區塊設定條件，可以更快掌握所需資訊。</p><h3 id=3---call-stack>3 - CALL STACK</h3><p>第三個區塊是 <code>CALL STACK</code>，此區可以協助梳理程式碼的拓墣關係：</p><p><img src=https://minglunwu.github.io/images/20230729/debug_5.png alt></p><p>以上圖來說，可以發現 <code>CALL STACK</code> 中包含了兩列資訊，因為 Debugger 工具執行此檔案時，是先從第 11 行的 <code>main</code> 區塊開始執行，然後在第 13 行的 <code>confused_func()</code> 進入，接著在第 8 行遭遇 Breakpoint。</p><p>我們可以點選此區，快速切換幾個關鍵的 Entrypoint，我個人認為這個功能在處理「多個 Python Module 相互引用」的情境時，特別有幫助，可以快速確認當下在 Debug 的程式碼，是如何被呼叫的！</p><h3 id=4---debug-console>4 - DEBUG CONSOLE</h3><p>下一個區塊是我個人最喜歡的 <code>DEBUG CONSOLE</code>，需要點選下圖紅圈處進行切換 :</p><p><img src=https://minglunwu.github.io/images/20230729/debug_6.png alt></p><p>此處就是在「當下凍結的環境」中，提供一個「互動式介面」，讓你可以自由地進行嘗試。</p><p>舉例來說，我們可以自由輸入程式碼，來確認 <code>product_info</code> 到底有哪些 key ? 也可以直接輸入我目前猜測的 Key : <code>pID</code>，然後得到 KeyError。</p><p>在 <code>DEBUG CONSOLE</code> 中執行的指令，都能在第一時間得到結果。</p><p><img src=https://minglunwu.github.io/images/20230729/debug_7.png alt></p><p>過往在建模時，常會需要進行矩陣相乘，我常常在開發的過程中忘記矩陣的維度，透過 <code>Debug Console</code> 可以很直覺的進行 Trial & Error，再也不用從頭開始執行 Python 程式，然後等待程式噴錯才能判讀錯誤資訊。</p><p>值得注意的是 : 在 <code>Debug Console</code> 進行的操作，是會直接改變當下的 Debug 環境，也就是說如果我在 <code>Debug Console</code> 中，替 <code>product_info</code> 加入一個新的 Key (例如 : <code>price</code>)，在左上角的 <code>Variables</code> 是會即時更新的！</p><h3 id=5---debug-選單>5 - Debug 選單</h3><p>了解各區塊的用處後，最後我們要介紹 <code>Debug 選單</code> (下圖紅圈處):</p><p><img src=https://minglunwu.github.io/images/20230729/debug_8.png alt></p><p>由左而右分別是 :</p><ul><li><strong>Continue</strong> : 會繼續執行 Debug 程序，直到遇到下個 Breakpoint 或是程式結束。</li><li><strong>Step Over</strong>: 當接下來遭遇 Function 時，不進入其中，直接往下執行。</li><li><strong>Step In</strong> : 當接下來遭遇 Function 時，進入其中 (通常你會在 Function 中設定 Breakpoint)</li><li><strong>Step Out</strong> : 如果你已經透過 Step In 進入 Function，點選此按鈕可以往下執行，直到跳出當前的 Function。</li><li><strong>Restart</strong> : 重新執行一次 Debug 流程。</li><li><strong>Stop</strong> : 停止當前 Debug 流程。</li></ul><p><code>Debug 選單</code> 中的功能讓開發者在 Debug 階段，可以根據自己的需求來調整 Debug 的深淺。</p><p>藉由 Debugger 工具所得到的資訊，可以帶給開發者更即時的回饋。在開發當下能夠以互動式的介面，取得當前開發環境的特定資訊。</p><p>得到這些資訊後，可以回到流程圖中的第一步 - 進行開發，從而進入一個循環，當遇到不確定的情境、或是程式碼出現 Bug 時，透過 Debugger 工具來確認細節，得到資訊後再繼續進行下一個開發流程。</p><h1 id=總結>總結</h1><p>身邊許多人都是使用 <code>VSCode</code> 進行 Python 開發，儘管有使用 Python Extension，卻不是每個人都知道 Debug 這個功能的精妙之處。</p><p>我個人認為 <code>VSCode</code> 的 Python Extension Debug 功能，對於我的開發效率，有極大的提升。</p><p>透過這篇筆記，我希望能夠帶給你 Debugger 工具的基本使用方式，幫助你在 Python 開發之路上，有更高的開發效率。</p><p>如果這篇筆記對你有幫助，或是有任何問題的話，歡迎底下留言告訴我。 Happy Coding !</p><hr><ul class=pager><li class=previous><a href=/notes/2023/pytest_101_2.html/ data-toggle=tooltip data-placement=top title="Pytest 101 - 給 Python 開發者的測試入門 (2) - Mock 基礎介紹">&larr;
Previous Post</a></li><li class=next><a href=/notes/2023/pytest_101_3.html/ data-toggle=tooltip data-placement=top title="Pytest 101 - 給 Python 開發者的測試入門 (3) - 圖解 Mock & 測試框架語法整理">Next
Post &rarr;</a></li></ul><hr><div><h2>See Also</h2><div class=card><div class=card-content style=padding:2px><a class="title is-5" href=https://minglunwu.com/notes/2023/pytest_101_3.html/>Pytest 101 - 給 Python 開發者的測試入門 (3) - 圖解 Mock & 測試框架語法整理</a>
<span class=heading><time>(August 17, 2023)</time></span></div></div><div class=card><div class=card-content style=padding:2px><a class="title is-5" href=https://minglunwu.com/notes/2023/pytest_101_2.html/>Pytest 101 - 給 Python 開發者的測試入門 (2) - Mock 基礎介紹</a>
<span class=heading><time>(March 12, 2023)</time></span></div></div><div class=card><div class=card-content style=padding:2px><a class="title is-5" href=https://minglunwu.com/notes/2022/pytest_101.html/>Pytest 101 - 給 Python 開發者的測試入門</a>
<span class=heading><time>(March 4, 2022)</time></span></div></div></div><hr><script src=https://utteranc.es/client.js repo=MingLunWu/MingLunWu.github.io issue-term=title theme=github-light crossorigin=anonymous async></script><hr><iframe src=https://minglunwu.substack.com/embed width=100% height=320 style="border:1px solid #eee;background:#fff" frameborder=0 scrolling=no></iframe></div><div class="col-lg-2 col-lg-offset-0
visible-lg-block
sidebar-container
catalog-container"><div class=side-catalog><hr class="hidden-sm hidden-xs"><h5><a class=catalog-toggle href=#>CATALOG</a></h5><ul class=catalog-body></ul></div></div><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
sidebar-container"><section><hr class="hidden-sm hidden-xs"><h5><a href=/tags/>FEATURED TAGS</a></h5><div class=tags><a href=/tags/ansible title=ansible>ansible</a>
<a href=/tags/book title=book>book</a>
<a href=/tags/concept title=concept>concept</a>
<a href=/tags/fast-api title=fast-api>fast-api</a>
<a href=/tags/fast-api-tutorial title=fast-api-tutorial>fast-api-tutorial</a>
<a href=/tags/music title=music>music</a>
<a href=/tags/note title=note>note</a>
<a href=/tags/pytest-101 title=pytest-101>pytest-101</a>
<a href=/tags/python title=python>python</a>
<a href=/tags/test title=test>test</a>
<a href=/tags/thought title=thought>thought</a>
<a href=/tags/tool title=tool>tool</a>
<a href=/tags/wsgi title=wsgi>wsgi</a></div></section></div></div></div></article><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a href=mailto:alen6997535@gmail.com><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://github.com/minglunwu><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://www.linkedin.com/in/ming-lun-wu-637020142/><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://medium.com/@minglun-wu><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-medium fa-stack-1x fa-inverse"></i></span></a></li><li><a href rel=alternate type=application/rss+xml title="Byte and Ink"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted">Copyright &copy; Byte and Ink 2024<br><a href=https://themes.gohugo.io/hugo-theme-cleanwhite>CleanWhite Hugo Theme</a> by <a href=https://zhaohuabing.com>Huabing</a> |
<iframe style=margin-left:2px;margin-bottom:-5px frameborder=0 scrolling=0 width=100px height=20px src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true"></iframe></p></div></div></div></footer><script>function loadAsync(e,t){var s=document,o="script",n=s.createElement(o),i=s.getElementsByTagName(o)[0];n.src=e,t&&n.addEventListener("load",function(e){t(null,e)},!1),i.parentNode.insertBefore(n,i)}</script><script>$("#tag_cloud").length!==0&&loadAsync("/js/jquery.tagcloud.js",function(){$.fn.tagcloud.defaults={color:{start:"#bbbbee",end:"#0085a1"}},$("#tag_cloud a").tagcloud()})</script><script>loadAsync("https://cdn.jsdelivr.net/npm/fastclick@1.0.6/lib/fastclick.min.js",function(){var e=document.querySelector("nav");e&&FastClick.attach(e)})</script><script type=text/javascript>function generateCatalog(e){_containerSelector="div.post-container";var t,n,s,o,i,a=$(_containerSelector),r=a.find("h1,h2,h3,h4,h5,h6");return $(e).html(""),r.each(function(){t=$(this).prop("tagName").toLowerCase(),o="#"+$(this).prop("id"),n=$(this).text(),i=$('<a href="'+o+'" rel="nofollow">'+n+"</a>"),s=$('<li class="'+t+'_nav"></li>').append(i),$(e).append(s)}),!0}generateCatalog(".catalog-body"),$(".catalog-toggle").click(function(e){e.preventDefault(),$(".side-catalog").toggleClass("fold")}),loadAsync("/js/jquery.nav.js",function(){$(".catalog-body").onePageNav({currentClass:"active",changeHash:!1,easing:"swing",filter:"",scrollSpeed:700,scrollOffset:0,scrollThreshold:.2,begin:null,end:null,scrollChange:null,padding:80})})</script></body></html>